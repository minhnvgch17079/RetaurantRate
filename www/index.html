<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' http://* 'unsafe-inline'; script-src 'self' http://* 'unsafe-inline' 'unsafe-eval'" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Restaurant Rate</title>
</head>

<body>
    <div class="container">
        <div>
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item ml-1 mr-1">
                            <select class="form-control">
                                <option value="">Restaurant Type</option>
                                <option value="Grill">Grill</option>
                                <option value="Fast Food">Fast Food</option>
                                <option value="Sea Food">Sea Food</option>
                            </select>
                        </li>
                        <li class="nav-item ml-1 mr-1">
                            <select class="form-control">
                                <option value="">Service</option>
                                <option class="text-danger" value="1">
                                    1 &#9733
                                </option>
                                <option class="text-warning" value="2">
                                    2 &#9733;
                                </option>
                                <option class="text-secondary" value="3">
                                    3 &#9733;
                                </option>
                                <option class="text-primary" value="4">
                                    4 &#9733;
                                </option>
                                <option class="text-success" value="5">
                                    5 &#9733;
                                </option>
                            </select>
                        </li>
                        <li class="nav-item ml-1 mr-1">
                            <select class="form-control">
                                <option value="">Cleanliness</option>
                                <option class="text-danger" value="1">
                                    1 &#9733
                                </option>
                                <option class="text-warning" value="2">
                                    2 &#9733;
                                </option>
                                <option class="text-secondary" value="3">
                                    3 &#9733;
                                </option>
                                <option class="text-primary" value="4">
                                    4 &#9733;
                                </option>
                                <option class="text-success" value="5">
                                    5 &#9733;
                                </option>
                            </select>
                        </li>
                        <li class="nav-item ml-1 mr-1">
                            <select class="form-control">
                                <option value="">Quality</option>
                                <option class="text-danger" value="1">
                                    1 &#9733
                                </option>
                                <option class="text-warning" value="2">
                                    2 &#9733;
                                </option>
                                <option class="text-secondary" value="3">
                                    3 &#9733;
                                </option>
                                <option class="text-primary" value="4">
                                    4 &#9733;
                                </option>
                                <option class="text-success" value="5">
                                    5 &#9733;
                                </option>
                            </select>
                        </li>
                    </ul>
                    <form class="form-inline my-2 my-lg-0">
                        <input class="form-control mr-3" type="search" placeholder="Restaurant Name" aria-label="Search">
                        <button class="btn btn-outline-info my-2 my-sm-0 mr-3" type="submit">Search</button>
                        <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#ratingPopUp">ADD RATING</button>
                    </form>
                </div>
            </nav>
        </div>

        <div class="modal fade" id="ratingPopUp" tabindex="-1" role="dialog" aria-labelledby="ratingPopUp" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">
                            <span class="badge badge-info">
                                Rating Restaurant
                                <i class="fa fa-star" aria-hidden="true"></i>
                            </span>
                        </h3>
                    </div>

                    <div id="showError" class="alert alert-warning alert-dismissible fade" role="alert">
                        <strong id="messageError">No Error Found</strong>
                        <button type="button" class="close" aria-label="Close" onclick="hideError()">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <table class="table table-striped" style="width: 100%;">
                            <tr>
                                <td>Your Name <span class="text-danger">(*)</span></td>
                                <td>
                                    <input class="form-control" type="text" name="reporterName" id="reporterName">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    Restaurant Name <span class="text-danger">(*)</span>
                                </td>
                                <td>
                                    <input class="form-control" type="text" name="restaurantName" id="restaurantName">
                                </td>
                            </tr>

                            <tr>
                                <td>Restaurant Type <span class="text-danger">(*)</span></td>
                                <td>
                                    <select class="form-control" name="restaurantType" id="restaurantType">
                                        <option value="">--Choose--</option>
                                        <option value="Grill">Grill</option>
                                        <option value="Fast Food">Fast Food</option>
                                        <option value="Sea Food">Sea Food</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td>Date Visit <span class="text-danger">(*)</span></td>
                                <td>
                                    <input class="form-control" type="date" name="dateTimeVisit" id="dateTimeVisit">
                                </td>
                            </tr>

                            <tr>
                                <td>Average Meal Price / Person <span class="text-danger">(*)</span></td>
                                <td>
                                    <input class="form-control" type="number" name="avgPrice" id="avgPrice">
                                </td>
                            </tr>

                            <tr>
                                <td>Service Rating <span class="text-danger">(*)</span></td>
                                <td>
                                    <select class="form-control" name="serviceRating" id="serviceRating">
                                        <option value="">--Choose--</option>
                                        <option class="text-danger" value="1">
                                    1 &#9733
                                </option>
                                <option class="text-warning" value="2">
                                    2 &#9733;
                                </option>
                                <option class="text-secondary" value="3">
                                    3 &#9733;
                                </option>
                                <option class="text-primary" value="4">
                                    4 &#9733;
                                </option>
                                <option class="text-success" value="5">
                                    5 &#9733;
                                </option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td>Cleanliness Rating <span class="text-danger">(*)</span></td>
                                <td>
                                    <select class="form-control" name="cleanRating" id="cleanRating">
                                        <option value="">--Choose--</option>
                                        <option class="text-danger" value="1">
                                    1 &#9733
                                </option>
                                <option class="text-warning" value="2">
                                    2 &#9733;
                                </option>
                                <option class="text-secondary" value="3">
                                    3 &#9733;
                                </option>
                                <option class="text-primary" value="4">
                                    4 &#9733;
                                </option>
                                <option class="text-success" value="5">
                                    5 &#9733;
                                </option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td>Food Quality Rating <span class="text-danger">(*)</span></td>
                                <td>
                                    <select class="form-control" name="foodRating" id="foodRating">
                                        <option value="">--Choose--</option>
                                        <option class="text-danger" value="1">
                                    1 &#9733
                                </option>
                                <option class="text-warning" value="2">
                                    2 &#9733;
                                </option>
                                <option class="text-secondary" value="3">
                                    3 &#9733;
                                </option>
                                <option class="text-primary" value="4">
                                    4 &#9733;
                                </option>
                                <option class="text-success" value="5">
                                    5 &#9733;
                                </option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td>Notes (optional)</td>
                                <td>
                                    <input class="form-control" placeholder="Anything want to tell us" type="text" name="optionNote" id="optionNote">
                                </td>
                            </tr>


                            <tr>
                                <td>
                                    <button type="button" class="btn btn-outline-info form-control" onclick="createRating()">Submit</button>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-outline-info form-control" data-dismiss="modal">Cancel</button>
                                </td>
                            </tr>

                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/moment.js"></script>
    <script type="text/javascript">
        app.initialize();

        function alertError (message) {
            $("#showError").addClass("show")
            $("#messageError").text(message)
            return false
        }

        function hideError () {
            $("#showError").removeClass("show")
        }

        function createRating () {
            let reporterName   = $("#reporterName").val()
            let restaurantName = $("#restaurantName" ).val()
            let restaurantType = $("#restaurantType").val()
            let dateTime       = $("#dateTimeVisit").val()
            let averagePrice   = $("#avgPrice").val()
            let serviceRating  = $("#serviceRating").val()
            let cleanRating    = $("#cleanRating").val()
            let foodRating     = $("#foodRating").val()
            let optionNote     = $("#optionNote").val()

            // if (this.validateReporterName(reporterName) !== true)                return false
            // if (this.validateRestaurantName(restaurantName) !== true)            return false
            // if (this.validateEmpty(restaurantType, 'Restaurant type') !== true)  return false
            // if (this.validateDate(dateTime) !== true)                            return false
            if (this.validatePrice(averagePrice) !== true) return false
        }

        function validateReporterName (name) {
            let nameNotValidMessage = 'Please enter more than 3 characters for your name.'
            if (name.length < 3) return this.alertError(nameNotValidMessage)
            return true
        }

        function validateRestaurantName (name) {
            let nameNotValidMessage = 'Please enter more than 3 characters for restaurant name.'
            if (name.length < 3) return this.alertError(nameNotValidMessage)
            return true
        }

        function validateEmpty (string, target) {
            let messageError = `${target} can not be empty`
            if (string.length < 1) return this.alertError(messageError)
            return true
        }

        function validateDate (date) {
            let validateDate = moment(date)
            let messageError = `Date visit is not valid`
            if (validateDate.isValid()) return true
            return this.alertError(messageError)
        }

        function validatePrice (price) {
            let messageError = 'Price is not valid'
            if (isNaN(price)) return this.alertError(messageError)
            return true
        }
    </script>
</body>

</html>
